# This file is managed by Puppet, any changes will be overwritten
verbose_logging = <%= @ldap_cfg_verbose_logging %>

[[servers]]
host = "<%= @ldap_cfg_host %>"
port = <%= @ldap_cfg_port %>
use_ssl = <%= @ldap_cfg_use_ssl %>
ssl_skip_verify = <%= @ldap_cfg_ssl_skip_verify %>
<%-if @ldap_cfg_root_ca_cert -%>
root_ca_cert = <%= @ldap_cfg_root_ca_cert %>
<%- end -%>
bind_dn = "<%= @ldap_cfg_bind_dn %>"
bind_password = '<%= @ldap_cfg_bind_password %>'
search_filter = "<%= @ldap_cfg_search_filter %>"
search_base_dns = <%= @ldap_cfg_search_base_dns %>
<%-if @ldap_cfg_group_search_filter -%>
group_search_filter= <%= @ldap_cfg_group_search_filter %>
<%- end -%>
group_search_base_dns = <%= @ldap_cfg_group_search_base_dns %>

[servers.attributes]
name = "<%= @ldap_cfg_atributes_name %>"
surname = "<%= @ldap_cfg_atributes_surname %>"
username = "<%= @ldap_cfg_atributes_username %>"
email = "<%= @ldap_cfg_atributes_email %>"

<%- @ldap_cfg_group_mappings.keys.sort.each do |key|
  if @ldap_cfg_group_mappings[key].is_a?(Hash) -%>

[[<%= key %>]]
    <%- @ldap_cfg_group_mappings[key].keys.sort.each do |valkey| -%>
        <%-if @ldap_cfg_group_mappings[key][valkey].is_a? Numeric -%>
<%= valkey %> = <%= @ldap_cfg_group_mappings[key][valkey] %>
        <%- else -%>
<%= valkey %> = "<%= @ldap_cfg_group_mappings[key][valkey] %>"
        <%- end
    end -%>
  <%- else -%>
<%= key %> = <%= @ldap_cfg_group_mappings[key] %>
  <%- end
end -%>
